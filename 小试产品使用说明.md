# 小试产品功能使用说明

## 功能概述
小试产品功能是质量控制系统的新增模块，专门用于管理小试生产阶段的产品质量数据。该功能提供了完整的数据录入、修改历史追踪、数据复制等功能。

## 主要特性

### 1. 数据录入
- **产品信息**: 牌号、批号、产线、检测人、测试日期、样品类别
- **产品数据**: 外观、固含、粘度、酸值、水分、残单、重均分子量、PDI、色度、阻聚剂、转化率、装车温度
- **样品类别**: 单批样、装车样、掺桶样

### 2. 自动历史记录
- 每次修改自动记录修改人、修改时间和修改原因
- 详细记录每个字段的修改前后值
- 不可删除的历史记录确保数据完整性

### 3. 数据复制功能
- 一键复制产品数据到剪贴板
- 自动生成格式化的文本内容
- 方便粘贴到其他系统或文档中

### 4. Admin界面优化
- 分组显示字段，界面清晰
- 搜索和筛选功能
- 日期层次导航

## 使用步骤

### 1. 添加小试产品
1. 访问 `/admin/products/pilotproduct/`
2. 点击"添加小试产品"按钮
3. 填写产品基本信息
4. 填写产品数据（可折叠显示）
5. 点击"保存"按钮

### 2. 查看历史记录
1. 在小试产品列表页面
2. 点击任意产品进入详情页
3. 展开"修改历史"区域查看历史记录
4. 或访问 `/admin/products/pilotproducthistory/` 查看所有历史

### 3. 复制数据
1. 在产品详情页面
2. 展开"复制文本"区域
3. 点击"复制文本"按钮
4. 数据会自动复制到剪贴板

## 技术特点

### 模型设计
- `PilotProduct`: 主模型，存储小试产品数据
- `PilotProductHistory`: 历史记录模型，存储修改历史

### Admin功能
- 自动检测字段修改并生成修改描述
- 自定义字段显示和筛选
- 复制文本功能集成JavaScript
- 优化的界面布局

### 数据完整性
- 所有修改都有历史记录
- 不可删除的历史数据
- 自动记录修改人信息

## 测试数据
系统已包含一个测试用的小试产品：
- 牌号: 小试产品-001
- 批号: TEST-2024-001
- 产线: 试验线

## 访问地址
- Admin主界面: http://127.0.0.1:8000/admin/
- 小试产品列表: http://127.0.0.1:8000/admin/products/pilotproduct/
- 历史记录: http://127.0.0.1:8000/admin/products/pilotproducthistory/

## 注意事项
1. 确保已运行数据库迁移
2. 需要管理员权限访问Admin界面
3. 修改历史功能需要用户登录
4. 复制功能需要浏览器支持Clipboard API
