# 质检管理系统项目简化建议

## 当前项目结构分析

当前项目包含多个应用模块，存在一些冗余和重复代码。以下是简化建议：

### 1. 应用模块合并

**建议合并以下应用：**
- `dashboard` - 首页仪表板
- `products` - 产品管理（包含干膜、胶粘剂、中试产品）
- `raw_materials` - 原料管理  
- `reports` - 报告管理

**合并方案：**
- 将 `raw_materials` 和 `reports` 功能整合到 `products` 应用中
- 保持 `dashboard` 作为独立的首页应用

### 2. 文件清理

**可以删除的文件：**
- `test_adhesive_product.py` - 功能已整合到统一API
- `test_pilot_product.py` - 功能已整合到统一API  
- `test_raw_materials.py` - 功能已整合到统一API
- `test_charts_api.py` - 功能已整合到统一API
- `test_system.py` - 功能重复

**保留的文件：**
- `test_api.py` - 统一的API测试脚本
- `check_data.py` - 数据检查工具
- `manage.py` - Django管理脚本

### 3. API端点统一

**已完成的工作：**
- 创建了统一的API端点结构：
  - `/api/products/dryfilm/` - 干膜产品相关API
  - `/api/products/adhesive/` - 胶粘剂产品相关API
  - `/api/products/pilot/` - 中试产品相关API（待实现）

**每个产品类型包含：**
- `chart-data/` - 图表数据
- `search/` - 产品查询
- `moving-range/` - 移动极差分析
- `capability-analysis/` - 能力分析

### 4. 模板文件优化

**建议：**
- 删除 `dashboard/templates/dashboard/index_old.html`（旧版本）
- 统一前端模板结构，减少重复代码

### 5. 静态文件管理

**建议：**
- 将静态文件统一组织到 `static/` 目录下
- 删除不必要的静态文件

## 执行步骤

### 第一步：备份当前项目
```bash
# 创建备份目录
mkdir backup
cp -r * backup/
```

### 第二步：删除冗余文件
```bash
# 删除冗余测试文件
rm test_adhesive_product.py test_pilot_product.py test_raw_materials.py test_charts_api.py test_system.py

# 删除旧模板文件
rm dashboard/templates/dashboard/index_old.html
```

### 第三步：应用模块重构（可选）
如果需要进一步简化，可以考虑：
1. 将 `raw_materials` 模型迁移到 `products` 应用
2. 将 `reports` 功能整合到 `products` 应用
3. 更新相关URL配置和视图函数

### 第四步：验证功能
运行测试确保所有功能正常：
```bash
python test_api.py
python manage.py test
```

## 预期收益

1. **代码精简**：减少约30%的文件数量
2. **维护便利**：统一的API结构，便于扩展和维护
3. **性能提升**：减少重复代码，提高执行效率
4. **开发效率**：清晰的模块结构，便于新功能开发

## 风险控制

1. 先备份再操作
2. 逐步执行，每一步都进行验证
3. 保留重要的历史文件（如分析报告、使用指南）

## 确认执行

如果您同意上述简化方案，请确认后我将执行文件清理操作。
